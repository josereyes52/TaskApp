{% extends 'base.html.twig' %}
{%block titulo %}Login{%endblock%}


{% block body %}
    <h1>Iniciar sesion - TaskApp</h1>
    {# app/Resources/views/security/login.html.twig #}
    {# ... you will probably extend your base template, like base.html.twig #}

    {% if error %}
        <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}

    <form action="{{ path('login') }}" method="post">
        <label for="username">Username:</label>
        <input type="text" id="username" name="_username" value="{{ last_username }}" />

        <label for="password">Password:</label>
        <input type="password" id="password" name="_password" />

        {#
            If you want to control the URL the user
            is redirected to on success (more details below)
            <input type="hidden" name="_target_path" value="/account" />
        #}
        <input type="hidden" name="_target_path" value="/usuario" />

        <button type="submit">login</button>
    </form>







    {#<form>#}
        {#<div class="form-group">#}
            {#<label for="exampleInputEmail1">Username</label>#}
            {#<input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">#}
            {#<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>#}
        {#</div>#}
        {#<div class="form-group">#}
            {#<label for="exampleInputPassword1">Password</label>#}
            {#<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">#}
        {#</div>#}
        {#<div class="form-group form-check">#}
            {#<input type="checkbox" class="form-check-input" id="exampleCheck1">#}
            {#<label class="form-check-label" for="exampleCheck1">Check me out</label>#}
        {#</div>#}
        {#<a href="{{ path('registrar_usuario') }}">Registrarse</a><br><br>#}
        {#<button type="submit" class="btn btn-primary" onclick="login()">Submit</button>#}
    {#</form>#}
    {#<script>#}
        {#function login(){#}
            {#var id = $('#id').val();#}
            {#var nombre = $('#nombre').val();#}
            {#var username = $('#username').val();#}
            {#var tipo = $('#tipo').val();#}
            {#var contrasena = $('#contrasena').val();#}

            {#var data = {#}
                    {#nombre: nombre,#}
                    {#username: username,#}
                    {#tipoUsuario: tipo,#}
                    {#contrasena: contrasena#}
            {#};#}
            {#$.ajax({#}
                {#url: Routing.generate('actualizar_usuarios', {id: id}),#}
                {#type:'PUT',#}
                {#data:JSON.stringify(data),#}
                {#success: function(response){#}
                    {#window.location.href = Routing.generate('lista_usuario');#}
                    {#console.log(response);#}
                {#},#}
                {#error: function(err){#}
                    {#console.log(err);#}
                {#}#}
            {#})#}

        {#}#}

    {#</script>#}
{% endblock %}